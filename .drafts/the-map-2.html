<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>Hierarchical Content Structure</title>
<style>
    body {
        font-family: Arial, sans-serif; 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box;
        background: #f9f9f9;
    }

    header {
        padding: 1rem;
        background: #1a73e8;
        color: #fff;
        text-align: center;
    }

    /* Container for filters and search */
    .controls-container {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding: 1rem;
        background: #fff;
        border-bottom: 1px solid #ddd;
    }

    .filter-bar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .filter-bar button {
        border: 1px solid #ccc;
        background: #eee;
        border-radius: 4px;
        padding: 0.5rem 1rem;
        cursor: pointer;
        transition: background 0.3s;
        font-size: 0.9rem;
    }

    .filter-bar button.active {
        background: #1a73e8;
        color: #fff;
    }

    .filter-bar button:hover {
        background: #ddd;
    }

    .search-bar {
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .search-bar input {
        padding: 0.5rem 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1rem;
    }

    .suggestions {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #fff;
        border: 1px solid #ccc;
        border-top: none;
        border-radius: 0 0 4px 4px;
        max-height: 200px;
        overflow-y: auto;
        display: none;
        z-index: 10;
    }

    .suggestions li {
        padding: 0.5rem 1rem;
        cursor: pointer;
    }

    .suggestions li:hover {
        background: #f0f0f0;
    }

    main {
        padding: 1rem;
    }

    /* Hierarchy list styles */
    .hierarchy {
        list-style: none;
        padding-left: 0;
        margin: 0;
    }

    .hierarchy li {
        margin: 0.5rem 0;
        cursor: pointer;
        position: relative;
        padding-left: 1.2rem;
    }

    .hierarchy li::before {
        content: "â–¶";
        display: inline-block;
        width: 1rem;
        margin-right: 0.2rem;
        transform: rotate(90deg);
        color: #555;
    }

    .hierarchy li.collapsed::before {
        transform: rotate(0deg);
    }

    .hierarchy ul {
        list-style: none;
        margin: 0.5rem 0 0 1.5rem;
        padding: 0;
        display: block;
    }

    .hidden {
        display: none !important;
    }

    @media (max-width: 600px) {
        .filter-bar {
            flex-direction: column;
            align-items: stretch;
        }

        .filter-bar button {
            width: 100%;
        }
    }
</style>
</head>
<body>

<header>
    <h1>Hierarchical Content Browser</h1>
</header>

<div class="controls-container">
    <div class="filter-bar">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="domain">Domain</button>
        <button class="filter-btn" data-filter="field">Field</button>
        <button class="filter-btn" data-filter="branch">Branch</button>
        <button class="filter-btn" data-filter="subject">Subject</button>
        <button class="filter-btn" data-filter="topic">Topic</button>
        <button class="filter-btn" data-filter="concept">Concept</button>
    </div>
    <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search..." />
        <ul class="suggestions" id="suggestions-list"></ul>
    </div>
</div>

<main>
    <!-- Hierarchical Content Example -->
    <ul class="hierarchy" id="hierarchy-list">
        <!-- Domain Level -->
        <li class="domain">
            Natural Sciences
            <ul>
                <!-- Field Level -->
                <li class="field">
                    Physics
                    <ul>
                        <!-- Branch Level -->
                        <li class="branch">
                            Classical Mechanics
                            <ul>
                                <!-- Subject Level -->
                                <li class="subject">
                                    Newtonian Dynamics
                                    <ul>
                                        <!-- Topic Level -->
                                        <li class="topic">
                                            Laws of Motion
                                            <ul>
                                                <!-- Concept Level -->
                                                <li class="concept">Newton's First Law</li>
                                                <li class="concept">Newton's Second Law</li>
                                                <li class="concept">Newton's Third Law</li>
                                            </ul>
                                        </li>
                                        <li class="topic">
                                            Gravity
                                            <ul>
                                                <li class="concept">Universal Gravitation</li>
                                                <li class="concept">Gravitational Potential</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li class="subject">
                                    Fluid Mechanics
                                    <ul>
                                        <li class="topic">
                                            Viscosity
                                            <ul>
                                                <li class="concept">Laminar Flow</li>
                                                <li class="concept">Turbulent Flow</li>
                                            </ul>
                                        </li>
                                        <li class="topic">
                                            Buoyancy
                                            <ul>
                                                <li class="concept">Archimedes' Principle</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="branch">
                            Quantum Mechanics
                            <ul>
                                <li class="subject">
                                    Wave-Particle Duality
                                    <ul>
                                        <li class="topic">
                                            Photons
                                            <ul>
                                                <li class="concept">Photoelectric Effect</li>
                                                <li class="concept">Compton Scattering</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="field">
                    Chemistry
                    <ul>
                        <li class="branch">
                            Organic Chemistry
                            <ul>
                                <li class="subject">
                                    Hydrocarbons
                                    <ul>
                                        <li class="topic">
                                            Alkanes
                                            <ul>
                                                <li class="concept">Methane</li>
                                                <li class="concept">Ethane</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="branch">
                            Inorganic Chemistry
                            <ul>
                                <li class="subject">
                                    Periodic Table
                                    <ul>
                                        <li class="topic">
                                            Alkali Metals
                                            <ul>
                                                <li class="concept">Lithium</li>
                                                <li class="concept">Sodium</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</main>

<script>
    // ==============================================
    // Data Extraction for Suggestions
    // ==============================================
    // Extract all items by class to build a simple in-memory dataset.
    const filters = ["all", "domain", "field", "branch", "subject", "topic", "concept"];
    const hierarchyList = document.getElementById('hierarchy-list');

    function extractItems() {
        const data = {};
        filters.forEach(f => { data[f] = []; });

        filters.forEach(f => {
            const elems = hierarchyList.querySelectorAll('.' + f);
            elems.forEach(el => {
                data[f].push(el.firstChild.textContent.trim());
                // 'All' contains everything
                data["all"].push(el.firstChild.textContent.trim());
            });
        });

        // Remove duplicates from the arrays
        for (let f of filters) {
            data[f] = [...new Set(data[f])];
        }
        return data;
    }

    const data = extractItems();

    // ==============================================
    // Filter Bar Functionality
    // ==============================================
    const filterButtons = document.querySelectorAll('.filter-bar button');
    let currentFilter = 'all';

    filterButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            filterButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentFilter = btn.dataset.filter;
            updateVisibleItems();
            updateSuggestions();
        });
    });

    function updateVisibleItems() {
        // If "all" is selected, show all. Otherwise hide non-matching levels.
        filters.forEach(f => {
            const elems = hierarchyList.querySelectorAll('.' + f);
            elems.forEach(el => {
                el.classList.remove('hidden');
                if (currentFilter !== 'all' && !el.classList.contains(currentFilter)) {
                    el.classList.add('hidden');
                }
            });
        });
    }

    // Initialize visibility
    updateVisibleItems();

    // ==============================================
    // Search and Suggestions
    // ==============================================
    const searchInput = document.getElementById('search-input');
    const suggestionsList = document.getElementById('suggestions-list');

    searchInput.addEventListener('input', () => {
        updateSuggestions();
    });

    function updateSuggestions() {
        const query = searchInput.value.toLowerCase().trim();
        suggestionsList.innerHTML = '';
        if (query === '') {
            suggestionsList.style.display = 'none';
            return;
        }

        const filteredData = data[currentFilter].filter(item => item.toLowerCase().includes(query));
        if (filteredData.length > 0) {
            filteredData.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                li.addEventListener('click', () => {
                    searchInput.value = item;
                    suggestionsList.style.display = 'none';
                    highlightItem(item);
                });
                suggestionsList.appendChild(li);
            });
            suggestionsList.style.display = 'block';
        } else {
            suggestionsList.style.display = 'none';
        }
    }

    function highlightItem(text) {
        // Expand all and highlight the matched item
        // Simple approach: expand entire tree and scroll to the matched item
        const allNodes = hierarchyList.querySelectorAll('li');
        allNodes.forEach(li => {
            // Expand all parents
            if (li.querySelector('ul')) {
                li.classList.remove('collapsed');
                li.querySelector('ul').style.display = 'block';
            }
        });

        // Scroll to the item
        const match = Array.from(allNodes).find(li => li.firstChild && li.firstChild.textContent.trim() === text);
        if (match) {
            match.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    // ==============================================
    // Toggle Visibility of Nested Content
    // ==============================================
    hierarchyList.addEventListener('click', (e) => {
        // If clicked on a list item that has children
        const target = e.target.closest('li');
        if (target && target.querySelector('ul')) {
            const childUl = target.querySelector('ul');
            if (childUl.style.display === 'none') {
                childUl.style.display = 'block';
                target.classList.remove('collapsed');
            } else {
                childUl.style.display = 'none';
                target.classList.add('collapsed');
            }
        }
    });

    // Initialize all nested lists to be visible
    const allLis = hierarchyList.querySelectorAll('li');
    allLis.forEach(li => {
        if (li.querySelector('ul')) {
            // Initially visible
            li.classList.remove('collapsed');
            li.querySelector('ul').style.display = 'block';
        }
    });

    // ==============================================
    // Responsiveness (via CSS) - Already handled in CSS
    // ==============================================

</script>

</body>
</html>
